
	<section xmlns:tp="http://telepathy.freedesktop.org/wiki/DbusSpec#extensions-v0"><title>
				Interface <phrase role="die">com.citrix.xenclient.usbdaemon</phrase></title><para>Interface to the USB policy daemon.</para><section><title>Methods:</title><section><title>
				Method <phrase role="die">get_policy_domuuid</phrase></title><para>Query the USB device policy for a specified VM.</para><para>The arguments are:</para><informaltable frame="none"><tgroup cols="4"><colspec colwidth="0.5in"/><colspec colwidth="2in"/><colspec colwidth="1.5in"/><colspec colwidth="2.5in"/><thead><row><entry>Type</entry><entry>Name</entry><entry>Direction</entry><entry>Description</entry></row></thead><tbody><row><entry>s</entry><entry><phrase role="die">uuid</phrase></entry><entry>in</entry><entry>UUID of VM to query policy for.</entry></row><row><entry>s</entry><entry><phrase role="die">value</phrase></entry><entry>out</entry><entry>Policy for specified VM, as XML.</entry></row></tbody></tgroup></informaltable></section><section><title>
				Method <phrase role="die">set_policy_domuuid</phrase></title><para>Set the USB device policy for a specified VM.</para><para>The arguments are:</para><informaltable frame="none"><tgroup cols="4"><colspec colwidth="0.5in"/><colspec colwidth="2in"/><colspec colwidth="1.5in"/><colspec colwidth="2.5in"/><thead><row><entry>Type</entry><entry>Name</entry><entry>Direction</entry><entry>Description</entry></row></thead><tbody><row><entry>s</entry><entry><phrase role="die">uuid</phrase></entry><entry>in</entry><entry>UUID of VM to query policy for.</entry></row><row><entry>s</entry><entry><phrase role="die">policy</phrase></entry><entry>in</entry><entry>Policy for specified VM, as XML.</entry></row></tbody></tgroup></informaltable></section><section><title>
				Method <phrase role="die">new_vm</phrase></title><para>Tell daemon a new VM has been started</para><para>The arguments are:</para><informaltable frame="none"><tgroup cols="4"><colspec colwidth="0.5in"/><colspec colwidth="2in"/><colspec colwidth="1.5in"/><colspec colwidth="2.5in"/><thead><row><entry>Type</entry><entry>Name</entry><entry>Direction</entry><entry>Description</entry></row></thead><tbody><row><entry>i</entry><entry><phrase role="die">dom_id</phrase></entry><entry>in</entry><entry>ID of newly started VM.</entry></row></tbody></tgroup></informaltable></section><section><title>
				Method <phrase role="die">vm_stopped</phrase></title><para>Tell daemon a VM is stopping.</para><para>The arguments are:</para><informaltable frame="none"><tgroup cols="4"><colspec colwidth="0.5in"/><colspec colwidth="2in"/><colspec colwidth="1.5in"/><colspec colwidth="2.5in"/><thead><row><entry>Type</entry><entry>Name</entry><entry>Direction</entry><entry>Description</entry></row></thead><tbody><row><entry>i</entry><entry><phrase role="die">dom_id</phrase></entry><entry>in</entry><entry>ID of stopping VM.</entry></row></tbody></tgroup></informaltable></section><section><title>
				Method <phrase role="die">list_devices</phrase></title><para>Enumerate the USB devices plugged into the system. This may be invalidated by the **</para><para>The arguments are:</para><informaltable frame="none"><tgroup cols="4"><colspec colwidth="0.5in"/><colspec colwidth="2in"/><colspec colwidth="1.5in"/><colspec colwidth="2.5in"/><thead><row><entry>Type</entry><entry>Name</entry><entry>Direction</entry><entry>Description</entry></row></thead><tbody><row><entry>ai</entry><entry><phrase role="die">devices</phrase></entry><entry>out</entry><entry>List of IDs of devices in the system.</entry></row></tbody></tgroup></informaltable></section><section><title>
				Method <phrase role="die">get_device_info</phrase></title><para>Connection states are defined as follows:</para> 
		<itemizedlist>
		<listitem><para>-1  Cannot find device</para></listitem> 
		<listitem><para>0  Device not in use by any VM</para></listitem> 
		<listitem><para>1  Assigned to another VM which is off</para></listitem> 
		<listitem><para>2  Assigned to another VM which is running</para></listitem> 
		<listitem><para>3  Blocked by policy for specified VM</para></listitem>
		<listitem><para>4  In use by specified VM</para></listitem> 
		<listitem><para>5  In use by specified VM and flagged "sticky"</para></listitem> 
		<listitem><para>6  Flagged as "sticky" assigned to specified VM, but not currently in use</para></listitem> 
		<listitem><para>7  Special platform device, listed purely for information</para></listitem> 
		<listitem><para>8  HiD device in use by dom0</para></listitem> 
		<listitem><para>9  HiD device in use by dom0, but "sticky" assigned to an off VM</para></listitem> 
		<listitem><para>10 External CD drive in use by dom0</para></listitem> 
		<listitem><para>11 External CD drive in use by dom0, but "sticky" assigned to an off VM</para></listitem>
		</itemizedlist>
		<para>The arguments are:</para><informaltable frame="none"><tgroup cols="4"><colspec colwidth="0.5in"/><colspec colwidth="2in"/><colspec colwidth="1.5in"/><colspec colwidth="2.5in"/><thead><row><entry>Type</entry><entry>Name</entry><entry>Direction</entry><entry>Description</entry></row></thead><tbody><row><entry>i</entry><entry><phrase role="die">dev_id</phrase></entry><entry>in</entry><entry>ID of device to query.</entry></row><row><entry>s</entry><entry><phrase role="die">vm_uuid</phrase></entry><entry>in</entry><entry>UUID of VM to get information relative to.</entry></row><row><entry>s</entry><entry><phrase role="die">name</phrase></entry><entry>out</entry><entry>Name of device.</entry></row><row><entry>i</entry><entry><phrase role="die">state</phrase></entry><entry>out</entry><entry>Connection state of device.</entry></row><row><entry>s</entry><entry><phrase role="die">vm_assigned</phrase></entry><entry>out</entry><entry>UUID of VM device is assigned to (if any).</entry></row><row><entry>s</entry><entry><phrase role="die">detail</phrase></entry><entry>out</entry><entry>Name detail, for mouse-over text.</entry></row></tbody></tgroup></informaltable></section><section><title>
				Method <phrase role="die">assign_device</phrase></title><para>Assign a device to a VM.</para><para>The arguments are:</para><informaltable frame="none"><tgroup cols="4"><colspec colwidth="0.5in"/><colspec colwidth="2in"/><colspec colwidth="1.5in"/><colspec colwidth="2.5in"/><thead><row><entry>Type</entry><entry>Name</entry><entry>Direction</entry><entry>Description</entry></row></thead><tbody><row><entry>i</entry><entry><phrase role="die">dev_id</phrase></entry><entry>in</entry><entry>ID of device to assign.</entry></row><row><entry>s</entry><entry><phrase role="die">vm_uuid</phrase></entry><entry>in</entry><entry>UUID of VM to assign device to.</entry></row></tbody></tgroup></informaltable></section><section><title>
				Method <phrase role="die">unassign_device</phrase></title><para>Unassign a device from a VM.</para><para>The arguments are:</para><informaltable frame="none"><tgroup cols="4"><colspec colwidth="0.5in"/><colspec colwidth="2in"/><colspec colwidth="1.5in"/><colspec colwidth="2.5in"/><thead><row><entry>Type</entry><entry>Name</entry><entry>Direction</entry><entry>Description</entry></row></thead><tbody><row><entry>i</entry><entry><phrase role="die">dev_id</phrase></entry><entry>in</entry><entry>ID of device to unassign.</entry></row></tbody></tgroup></informaltable></section><section><title>
				Method <phrase role="die">set_sticky</phrase></title><para>Set or clear the sticky assignment flag for a device.</para><para>The arguments are:</para><informaltable frame="none"><tgroup cols="4"><colspec colwidth="0.5in"/><colspec colwidth="2in"/><colspec colwidth="1.5in"/><colspec colwidth="2.5in"/><thead><row><entry>Type</entry><entry>Name</entry><entry>Direction</entry><entry>Description</entry></row></thead><tbody><row><entry>i</entry><entry><phrase role="die">dev_id</phrase></entry><entry>in</entry><entry>ID of device to alter sticky flag for.</entry></row><row><entry>i</entry><entry><phrase role="die">sticky</phrase></entry><entry>in</entry><entry>Set (1), or clear (0) sticky flag.</entry></row></tbody></tgroup></informaltable></section><section><title>
				Method <phrase role="die">name_device</phrase></title><para>Set the user visible name for a device.</para><para>The arguments are:</para><informaltable frame="none"><tgroup cols="4"><colspec colwidth="0.5in"/><colspec colwidth="2in"/><colspec colwidth="1.5in"/><colspec colwidth="2.5in"/><thead><row><entry>Type</entry><entry>Name</entry><entry>Direction</entry><entry>Description</entry></row></thead><tbody><row><entry>i</entry><entry><phrase role="die">dev_id</phrase></entry><entry>in</entry><entry>ID of device to set name for.</entry></row><row><entry>s</entry><entry><phrase role="die">name</phrase></entry><entry>in</entry><entry>Name to set for device.</entry></row></tbody></tgroup></informaltable></section><section><title>
				Method <phrase role="die">state</phrase></title><para>Dump daemon state, for debugging only.</para><para>The arguments are:</para><informaltable frame="none"><tgroup cols="4"><colspec colwidth="0.5in"/><colspec colwidth="2in"/><colspec colwidth="1.5in"/><colspec colwidth="2.5in"/><thead><row><entry>Type</entry><entry>Name</entry><entry>Direction</entry><entry>Description</entry></row></thead><tbody><row><entry>s</entry><entry><phrase role="die">state</phrase></entry><entry>out</entry><entry>Daemon state in human readable form.</entry></row></tbody></tgroup></informaltable></section></section><section><title>Signals:</title><section><title><phrase role="die">device_rejected</phrase></title><para>A USB device has been rejected due a policy.</para><para>The arguments are:</para><informaltable frame="none"><tgroup cols="4"><colspec colwidth="1in"/><colspec colwidth="1in"/><colspec colwidth="1in"/><colspec colwidth="3.5in"/><thead><row><entry>Type</entry><entry>Name</entry><entry>Direction</entry><entry>Description</entry></row></thead><tbody><row><entry>s</entry><entry><phrase role="die">device_name</phrase></entry><entry>in</entry><entry>User friendly name of device rejected.</entry></row><row><entry>s</entry><entry><phrase role="die">reason</phrase></entry><entry>in</entry><entry>Human-readable description of reason for rejection.</entry></row></tbody></tgroup></informaltable></section><section><title><phrase role="die">devices_changed</phrase></title><para>Device list previously given out may be out of date, re-enumerate.</para><para>This signal has no arguments.</para></section><section><title><phrase role="die">device_info_changed</phrase></title><para>Information previously given out regarding device may be out of date, re-query.</para><para>The arguments are:</para><informaltable frame="none"><tgroup cols="4"><colspec colwidth="1in"/><colspec colwidth="1in"/><colspec colwidth="1in"/><colspec colwidth="3.5in"/><thead><row><entry>Type</entry><entry>Name</entry><entry>Direction</entry><entry>Description</entry></row></thead><tbody><row><entry>i</entry><entry><phrase role="die">dev_id</phrase></entry><entry>in</entry><entry>ID of device needing re-query.</entry></row></tbody></tgroup></informaltable></section></section></section>

